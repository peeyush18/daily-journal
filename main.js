(()=>{"use strict";var t={88:function(t,e,i){var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(s,a){function o(t){try{r(n.next(t))}catch(t){a(t)}}function d(t){try{r(n.throw(t))}catch(t){a(t)}}function r(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,d)}r((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const s=i(795),a=i(805),o=i(568),d=()=>document.body.classList.contains("is-mobile");class r extends s.Plugin{constructor(t,e){super(t,e),this.settings=a.DEFAULT_SETTINGS}onload(){return n(this,void 0,void 0,(function*(){yield this.loadSettings(),this.addCommand({id:"open-custom-daily-note",name:"Open today's custom daily note",callback:()=>this.createOrOpenDailyNote()}),this.addCommand({id:"quick-daily-note-mobile",name:"Quick Daily Note (Mobile Optimized)",callback:()=>this.mobileCreateDailyNote(),mobileOnly:!0}),this.addSettingTab(new o.CustomDailyNotesSettingTab(this.app,this)),d()&&this.setupMobileFeatures(),d()&&this.settings.mobileOptions.defaultOpenOnStartup&&this.app.workspace.onLayoutReady((()=>{setTimeout((()=>this.mobileCreateDailyNote()),500)}))}))}createOrOpenDailyNote(){return n(this,void 0,void 0,(function*(){const{vault:t}=this.app,e=window.moment().format("YYYY-MM-DD"),i=`${this.settings.dailyNotesPrefix}${e}.md`,n=this.settings.dailyNotesFolder;try{yield this.ensureFolderExists(n);const e=`${n}/${i}`;let a=t.getAbstractFileByPath(e);if(!a){const n=yield this.generateDailyNoteContent();a=yield t.create(e,n),new s.Notice(`Created new daily note: ${i}`)}const o=this.app.workspace.getLeaf();yield o.openFile(a)}catch(t){new s.Notice(`Error creating daily note: ${t}`),console.error(t)}}))}ensureFolderExists(t){return n(this,void 0,void 0,(function*(){const{vault:e}=this.app,i=e.getAbstractFileByPath(t);i&&i instanceof s.TFolder||(yield e.createFolder(t))}))}generateDailyNoteContent(){return n(this,void 0,void 0,(function*(){const t=window.moment();let e="";this.settings.useYamlFrontmatter&&(e+="---\n",e+=`date: ${t.format("YYYY-MM-DD")}\n`,e+=`day: ${t.format("dddd")}\n`,this.settings.defaultTags.length>0&&(e+=`tags: [${this.settings.defaultTags.join(", ")}]\n`),e+="---\n\n"),this.settings.showTitle&&(e+=`# ${t.format(this.settings.titleFormat)}\n\n`);for(const i of this.settings.sections)if(i.enabled){if(i.weekdays&&i.weekdays.length>0){const e=t.format("dddd").toLowerCase();if(!i.weekdays.includes(e))continue}if(e+=`## ${i.heading}\n`,"tasks"===i.id&&this.settings.inheritTasks){const t=yield this.getIncompleteTasksFromPreviousDay();if(t.length>0){e+="\x3c!-- Inherited from previous day --\x3e\n";for(const i of t)e+=`${i}\n`;e+="\n"}}e+=`${i.content}\n\n`}return e}))}getIncompleteTasksFromPreviousDay(){return n(this,void 0,void 0,(function*(){if(!this.settings.inheritTasks)return[];const t=window.moment().subtract(1,"day").format("YYYY-MM-DD"),e=`${this.settings.dailyNotesPrefix}${t}.md`,i=`${this.settings.dailyNotesFolder}/${e}`;try{const t=this.app.vault.getAbstractFileByPath(i);if(!(t&&t instanceof s.TFile))return[];const e=yield this.app.vault.read(t),n=[],a=e.match(/## Tasks\n([\s\S]*?)(?=\n## \w+|\n*$)/i);if(a){const t=a[1].split("\n");for(const e of t)e.includes("- [ ] ")&&!e.includes(this.settings.taskInheritanceTag)&&n.push(e.trim())}return n}catch(t){return console.error("Error reading previous day tasks:",t),[]}}))}setupMobileFeatures(){this.addRibbonIcon("calendar-days","Daily Note",(()=>{this.mobileCreateDailyNote()})),this.settings.mobileOptions.enableSwipeNavigation&&this.registerMobileGestures()}registerMobileGestures(){let t=0,e=0;document.addEventListener("touchstart",(i=>{t=i.touches[0].clientX,e=i.touches[0].clientY}),{passive:!0}),document.addEventListener("touchend",(i=>{const n=i.changedTouches[0].clientX,s=i.changedTouches[0].clientY,a=t-n,o=e-s;Math.abs(o)>30||Math.abs(a)>50&&(a>0?this.navigateToAdjacentDay(1):this.navigateToAdjacentDay(-1))}),{passive:!0})}navigateToAdjacentDay(t){return n(this,void 0,void 0,(function*(){const e=this.app.workspace.getActiveFile();if(!e)return;const i=e.basename.match(/(\d{4}-\d{2}-\d{2})/);if(!i)return;const n=window.moment(i[1]).add(t,"days"),a=n.format("YYYY-MM-DD"),o=`${this.settings.dailyNotesPrefix}${a}.md`,d=`${this.settings.dailyNotesFolder}/${o}`;try{let t=this.app.vault.getAbstractFileByPath(d);if(!t){const e=yield this.generateDailyNoteContentForDate(n);t=yield this.app.vault.create(d,e)}const e=this.app.workspace.getLeaf();yield e.openFile(t)}catch(t){new s.Notice(`Error navigating to day: ${t}`),console.error(t)}}))}generateDailyNoteContentForDate(t){return n(this,void 0,void 0,(function*(){let e="";this.settings.useYamlFrontmatter&&(e+="---\n",e+=`date: ${t.format("YYYY-MM-DD")}\n`,e+=`day: ${t.format("dddd")}\n`,this.settings.defaultTags.length>0&&(e+=`tags: [${this.settings.defaultTags.join(", ")}]\n`),e+="---\n\n"),this.settings.showTitle&&(e+=`# ${t.format(this.settings.titleFormat)}\n\n`);for(const i of this.settings.sections)if(i.enabled){if(i.weekdays&&i.weekdays.length>0){const e=t.format("dddd").toLowerCase();if(!i.weekdays.includes(e))continue}e+=`## ${i.heading}\n${i.content}\n\n`}return e}))}mobileCreateDailyNote(){return n(this,void 0,void 0,(function*(){var t;try{if(yield this.createOrOpenDailyNote(),d()){const e=null===(t=this.app.workspace.getActiveViewOfType(s.MarkdownView))||void 0===t?void 0:t.editor;if(e){e.focus();const t=e.getValue().indexOf("- [ ] ");t>-1&&e.setCursor(e.offsetToPos(t+6))}}}catch(t){new s.Notice(`Mobile error: ${t instanceof Error?t.message:String(t)}`)}}))}loadSettings(){return n(this,void 0,void 0,(function*(){this.settings=Object.assign({},a.DEFAULT_SETTINGS,yield this.loadData())}))}saveSettings(){return n(this,void 0,void 0,(function*(){yield this.saveData(this.settings)}))}}e.default=r},568:function(t,e,i){var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(s,a){function o(t){try{r(n.next(t))}catch(t){a(t)}}function d(t){try{r(n.throw(t))}catch(t){a(t)}}function r(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,d)}r((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.CustomDailyNotesSettingTab=void 0;const s=i(795);class a extends s.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e}display(){const{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Basic Settings"}),new s.Setting(t).setName("Daily notes folder").setDesc("Folder where daily notes will be stored").addText((t=>t.setValue(this.plugin.settings.dailyNotesFolder).onChange((t=>n(this,void 0,void 0,(function*(){this.plugin.settings.dailyNotesFolder=t,yield this.plugin.saveSettings()})))))),t.createEl("h2",{text:"Task Inheritance"}),new s.Setting(t).setName("Enable task inheritance").setDesc("Automatically carry over incomplete tasks from previous day").addToggle((t=>t.setValue(this.plugin.settings.inheritTasks).onChange((t=>n(this,void 0,void 0,(function*(){this.plugin.settings.inheritTasks=t,yield this.plugin.saveSettings()})))))),t.createEl("h2",{text:"Mobile Settings"}),new s.Setting(t).setName("Enable mobile swipe navigation").setDesc("Swipe left/right to navigate between days").addToggle((t=>t.setValue(this.plugin.settings.mobileOptions.enableSwipeNavigation).onChange((t=>n(this,void 0,void 0,(function*(){this.plugin.settings.mobileOptions.enableSwipeNavigation=t,yield this.plugin.saveSettings()})))))),t.createEl("h2",{text:"Note Sections"}),this.plugin.settings.sections.forEach(((e,i)=>{const a=t.createDiv("section-setting");new s.Setting(a).setName(`Section ${i+1}: ${e.heading}`).setHeading(),new s.Setting(a).setName("Enabled").addToggle((t=>t.setValue(e.enabled).onChange((t=>n(this,void 0,void 0,(function*(){e.enabled=t,yield this.plugin.saveSettings()})))))),new s.Setting(a).setName("Heading").addText((t=>t.setValue(e.heading).onChange((t=>n(this,void 0,void 0,(function*(){e.heading=t,yield this.plugin.saveSettings()})))))),new s.Setting(a).setName("Default content").addTextArea((t=>t.setValue(e.content).onChange((t=>n(this,void 0,void 0,(function*(){e.content=t,yield this.plugin.saveSettings()}))))))}))}}e.CustomDailyNotesSettingTab=a},795:t=>{t.exports=require("obsidian")},805:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_SETTINGS=void 0,e.DEFAULT_SETTINGS={dailyNotesFolder:"Daily Notes",dailyNotesPrefix:"",defaultTags:["daily"],useYamlFrontmatter:!0,showTitle:!0,titleFormat:"YYYY-MM-DD dddd",inheritTasks:!0,taskInheritanceTag:"@incomplete",sections:[{id:"tasks",heading:"Tasks",content:"- [ ] ",weekdays:[],enabled:!0},{id:"journal",heading:"Journal",content:"What happened today?\n\nHow do I feel about it?",weekdays:[],enabled:!0},{id:"meetings",heading:"Meetings",content:"### 9:00 AM\n- ",weekdays:["monday","tuesday","wednesday","thursday","friday"],enabled:!0}],mobileOptions:{enableSwipeNavigation:!0,defaultOpenOnStartup:!0,quickEntryEnabled:!0,quickEntrySections:["tasks","journal"]}}}},e={},i=function i(n){var s=e[n];if(void 0!==s)return s.exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,i),a.exports}(88);module.exports=i})();